import{j as e,ac as v,ad as w}from"./vendor-B42s3pmA.js";import{useState as s,useEffect as p}from"react";import{c as l,L as k}from"./index-DEXg1UWV.js";import{N as u,a as F}from"./NotificationFilter-CHiOR7nX.js";import{S as _}from"./Sidebar-D01rgaLR.js";import"react-dom";const S=()=>{const[a,n]=s([]),[d,r]=s(!0),[c,y]=s(null),[i,j]=s("all");p(()=>{g()},[]);const g=async()=>{try{r(!0);const o=await(await fetch("/api/notifications")).json();n(o),l.track("view_notifications")}catch(t){y("Failed to load notifications"),l.track("notification_error",{error:t.message})}finally{r(!1)}},N=async t=>{try{await fetch(`/api/notifications/${t}/read`,{method:"PUT"}),n(o=>o.map(m=>m.id===t?{...m,read:!0}:m)),l.track("mark_notification_read",{notificationId:t})}catch(o){console.error("Failed to mark notification as read:",o)}},b=t=>{j(t),l.track("notifications_filter",{filter:t})},f=a.filter(t=>i==="all"?!0:t.type===i);if(d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(k,{size:"lg"})});if(c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:e.jsx(v,{className:"h-12 w-12 mx-auto"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Error Loading Notifications"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:c}),e.jsx("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Try Again"})]})});const h=a.filter(t=>!t.read).length;return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(u,{activeFilter:i,onFilterChange:b})}),e.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-9",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-card overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),h>0&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[h," unread"]})]}),f.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(t=>e.jsx(F,{notification:t,onMarkAsRead:N},t.id))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i==="all"?"You're all caught up!":`No ${i} notifications`})]})]})})]})})})},x=[{id:1,message:"You have a new connection request from Jane Doe",timestamp:"2 hours ago",category:"connection_requests"},{id:2,message:"John has applied to your job listing",timestamp:"1 day ago",category:"job_updates"},{id:3,message:"You received a new message from Sarah",timestamp:"3 days ago",category:"messages"},{id:4,message:"Your job application was viewed by an employer",timestamp:"5 days ago",category:"job_updates"}],$=()=>{const[a,n]=s("all"),[d,r]=s(x);return p(()=>{r(a==="all"?x:x.filter(c=>c.category===a))},[a]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(_,{}),e.jsx("div",{className:"flex-1 ml-0 md:ml-64",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Notifications"}),e.jsx(u,{selectedFilter:a,onFilterChange:n}),e.jsx(S,{notifications:d})]})})]})};export{$ as default};
//# sourceMappingURL=NotificationPage-CmSkR4Nl.js.map
