import{Q as l,r as c,j as e,S as u}from"./index-CAXHRMTp.js";const N={async getJobs(a={}){var t;try{return(await l.get("/jobs/",{params:a})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}},async getJobById(a){var t;try{return(await l.get(`/jobs/${a}/`)).data}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}},async createJob(a){var t;try{return(await l.post("/jobs/",a)).data}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}},async updateJob(a,t){var s;try{return(await l.put(`/jobs/${a}/`,t)).data}catch(n){throw((s=n.response)==null?void 0:s.data)||n.message}},async deleteJob(a){var t;try{return await l.delete(`/jobs/${a}/`),!0}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}},async applyForJob(a,t){var s;try{return(await l.post(`/jobs/${a}/apply/`,t)).data}catch(n){throw((s=n.response)==null?void 0:s.data)||n.message}},async getJobApplications(a){var t;try{return(await l.get(`/jobs/${a}/applications/`)).data}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}},async searchJobs(a){var t;try{return(await l.get("/jobs/search/",{params:{q:a}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}},async getJobsByEmployer(a){var t;try{return(await l.get(`/jobs/employer/${a}/`)).data}catch(s){throw((t=s.response)==null?void 0:t.data)||s.message}}},J=()=>{const[a,t]=c.useState(null),[s,n]=c.useState([]),[d,i]=c.useState(!1),[m,h]=c.useState(""),[p,b]=c.useState({email:"",password:""});c.useEffect(()=>{(async()=>{if(u.isAuthenticated())try{const o=await u.getCurrentUser();t(o),g()}catch(o){console.error("Failed to fetch user data:",o),h("Failed to load user data. Please log in again.")}})()},[]);const x=r=>{const{name:o,value:f}=r.target;b(w=>({...w,[o]:f}))},j=async r=>{r.preventDefault(),i(!0),h("");try{const o=await u.login(p.email,p.password);t(o),await g()}catch(o){console.error("Login failed:",o),h("Login failed. Please check your credentials and try again.")}finally{i(!1)}},y=()=>{u.logout(),t(null),n([])},g=async()=>{try{i(!0);const r=await N.getJobs();n(r)}catch(r){console.error("Failed to load jobs:",r),h("Failed to load jobs. Please try again later.")}finally{i(!1)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"API Integration Test"}),a?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Welcome, ",a.email,"!"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"You are now logged in."}),e.jsx("button",{onClick:y,className:"mt-2 px-4 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Logout"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Jobs"}),d?e.jsx("p",{children:"Loading jobs..."}):s.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(r=>{var o;return e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.title}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:r.company}),e.jsxs("p",{className:"text-gray-700 mt-2",children:[(o=r.description)==null?void 0:o.substring(0,100),"..."]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-600",children:r.job_type}),e.jsx("span",{className:"text-sm text-gray-500",children:r.location})]})]},r.id)})}):e.jsx("p",{children:"No jobs found."})]})]}):e.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Login"}),m&&e.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:m}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:p.email,onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:p.password,onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Logging in...":"Log in"})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsx("p",{children:"Test credentials (if available):"}),e.jsx("p",{children:"Email: test@example.com"}),e.jsx("p",{children:"Password: testpass123"})]})]}),m&&!d&&e.jsxs("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded",children:["Error: ",m]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"API Endpoints"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("code",{children:"POST /api/token/"})," - Get JWT tokens"]}),e.jsxs("li",{children:[e.jsx("code",{children:"POST /api/token/refresh/"})," - Refresh access token"]}),e.jsxs("li",{children:[e.jsx("code",{children:"GET /api/users/me/"})," - Get current user"]}),e.jsxs("li",{children:[e.jsx("code",{children:"GET /api/jobs/"})," - List all jobs"]}),e.jsxs("li",{children:[e.jsx("code",{children:"POST /api/jobs/"})," - Create a new job"]}),e.jsxs("li",{children:[e.jsx("code",{children:"GET /api/jobs/<id>/"})," - Get job details"]})]})]})]})};export{J as default};
//# sourceMappingURL=APITest-BZ25_fcZ.js.map
