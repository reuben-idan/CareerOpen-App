import{R as e,j as a,a as t,S as s}from"./index-C0ISbAl6.js";import{r}from"./react-vendor-Blpmel2Z.js";import"./utils-CE5H4mLI.js";import"./router-wWB8CCN9.js";import"./ui-components-Cj_Nz0sg.js";const l={async getJobs(a={}){var t;try{return(await e.get("/jobs/",{params:a})).data}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}},async getJobById(a){var t;try{return(await e.get(`/jobs/${a}/`)).data}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}},async createJob(a){var t;try{return(await e.post("/jobs/",a)).data}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}},async updateJob(a,t){var s;try{return(await e.put(`/jobs/${a}/`,t)).data}catch(r){throw(null==(s=r.response)?void 0:s.data)||r.message}},async deleteJob(a){var t;try{return await e.delete(`/jobs/${a}/`),!0}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}},async applyForJob(a,t){var s;try{return(await e.post(`/jobs/${a}/apply/`,t)).data}catch(r){throw(null==(s=r.response)?void 0:s.data)||r.message}},async getJobApplications(a){var t;try{return(await e.get(`/jobs/${a}/applications/`)).data}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}},async searchJobs(a){var t;try{return(await e.get("/jobs/search/",{params:{q:a}})).data}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}},async getJobsByEmployer(a){var t;try{return(await e.get(`/jobs/employer/${a}/`)).data}catch(s){throw(null==(t=s.response)?void 0:t.data)||s.message}}},o=()=>{const[e,o]=r.useState(null),[n,d]=r.useState([]),[i,c]=r.useState(!1),[m,u]=r.useState(""),[h,p]=r.useState({email:"",password:""});r.useEffect(()=>{(async()=>{if(s.isAuthenticated())try{const e=await s.getCurrentUser();o(e),g()}catch(e){console.error("Failed to fetch user data:",e),u("Failed to load user data. Please log in again.")}})()},[]);const b=e=>{const{name:a,value:t}=e.target;p(e=>({...e,[a]:t}))},g=async()=>{try{c(!0);const e=await l.getJobs();d(e)}catch(e){console.error("Failed to load jobs:",e),u("Failed to load jobs. Please try again later.")}finally{c(!1)}};return a("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-2xl font-bold mb-6",children:"API Integration Test"}),a("div",e?{children:[a("div",{className:"mb-6 p-4 bg-green-50 rounded-lg",children:[a("h2",{className:"text-lg font-semibold",children:["Welcome, ",e.email,"!"]}),t("p",{className:"text-sm text-gray-600",children:"You are now logged in."}),t("button",{onClick:()=>{s.logout(),o(null),d([])},className:"mt-2 px-4 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Logout"})]}),a("div",{className:"mt-8",children:[t("h2",{className:"text-xl font-semibold mb-4",children:"Jobs"}),i?t("p",{children:"Loading jobs..."}):n.length>0?t("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>{var s;return a("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[t("h3",{className:"font-semibold text-lg",children:e.title}),t("p",{className:"text-gray-600 text-sm mt-1",children:e.company}),a("p",{className:"text-gray-700 mt-2",children:[null==(s=e.description)?void 0:s.substring(0,100),"..."]}),a("div",{className:"mt-3 flex justify-between items-center",children:[t("span",{className:"text-sm text-blue-600",children:e.job_type}),t("span",{className:"text-sm text-gray-500",children:e.location})]})]},e.id)})}):t("p",{children:"No jobs found."})]})]}:{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md",children:[t("h2",{className:"text-xl font-semibold mb-4",children:"Login"}),m&&t("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:m}),a("form",{onSubmit:async e=>{e.preventDefault(),c(!0),u("");try{const e=await s.login(h.email,h.password);o(e),await g()}catch(a){console.error("Login failed:",a),u("Login failed. Please check your credentials and try again.")}finally{c(!1)}},className:"space-y-4",children:[a("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t("input",{type:"email",name:"email",value:h.email,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),a("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),t("input",{type:"password",name:"password",value:h.password,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Logging in...":"Log in"})]}),a("div",{className:"mt-4 text-sm text-gray-600",children:[t("p",{children:"Test credentials (if available):"}),t("p",{children:"Email: test@example.com"}),t("p",{children:"Password: testpass123"})]})]}),m&&!i&&a("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded",children:["Error: ",m]}),a("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[t("h2",{className:"text-lg font-semibold mb-2",children:"API Endpoints"}),a("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[a("li",{children:[t("code",{children:"POST /api/token/"})," - Get JWT tokens"]}),a("li",{children:[t("code",{children:"POST /api/token/refresh/"})," - Refresh access token"]}),a("li",{children:[t("code",{children:"GET /api/users/me/"})," - Get current user"]}),a("li",{children:[t("code",{children:"GET /api/jobs/"})," - List all jobs"]}),a("li",{children:[t("code",{children:"POST /api/jobs/"})," - Create a new job"]}),a("li",{children:[t("code",{children:"GET /api/jobs/<id>/"})," - Get job details"]})]})]})]})};export{o as default};
//# sourceMappingURL=APITest-BAJVzw4I.js.map
