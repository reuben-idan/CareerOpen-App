import{a as e}from"./utils-CE5H4mLI.js";const a="http://127.0.0.1:8000/api",t=e.create({baseURL:a,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const a=localStorage.getItem("accessToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,async r=>{var s;const o=r.config;if(401===(null==(s=r.response)?void 0:s.status)&&!o._retry){o._retry=!0;try{const s=localStorage.getItem("refreshToken");if(!s)return window.location.href="/login",Promise.reject(r);const n=await e.post(`${a}/token/refresh/`,{refresh:s}),{access:c,refresh:i}=n.data;return localStorage.setItem("accessToken",c),i&&localStorage.setItem("refreshToken",i),o.headers.Authorization=`Bearer ${c}`,t(o)}catch(n){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(n)}}return Promise.reject(r)});const r={api:t},{api:s}=r,o={getJobs:async(e={})=>{var a;try{return(await s.get("/jobs/",{params:e})).data}catch(t){throw(null==(a=t.response)?void 0:a.data)||t.message}},getJobById:async e=>{var a;try{return(await s.get(`/jobs/${e}/`)).data}catch(t){throw(null==(a=t.response)?void 0:a.data)||t.message}},createJob:async e=>{var a;try{return(await s.post("/jobs/",e)).data}catch(t){throw(null==(a=t.response)?void 0:a.data)||t.message}},updateJob:async(e,a)=>{var t;try{return(await s.put(`/jobs/${e}/`,a)).data}catch(r){throw(null==(t=r.response)?void 0:t.data)||r.message}},deleteJob:async e=>{var a;try{return await s.delete(`/jobs/${e}/`),!0}catch(t){throw(null==(a=t.response)?void 0:a.data)||t.message}},searchJobs:async(e,a={})=>{var t;try{return(await s.get("/jobs/search/",{params:{search:e,...a}})).data}catch(r){throw(null==(t=r.response)?void 0:t.data)||r.message}},applyForJob:async(e,a)=>{var t;try{return(await s.post(`/jobs/${e}/apply/`,a)).data}catch(r){throw(null==(t=r.response)?void 0:t.data)||r.message}},getUserApplications:async()=>{var e;try{return(await s.get("/jobs/applications/")).data}catch(a){throw(null==(e=a.response)?void 0:e.data)||a.message}},getApplicationDetails:async e=>{var a;try{return(await s.get(`/jobs/applications/${e}/`)).data}catch(t){throw(null==(a=t.response)?void 0:a.data)||t.message}},toggleSaveJob:async e=>{var a;try{return(await s.post(`/jobs/${e}/save/`)).data}catch(t){throw(null==(a=t.response)?void 0:a.data)||t.message}},getSavedJobs:async()=>{var e;try{return(await s.get("/jobs/saved/")).data}catch(a){throw(null==(e=a.response)?void 0:e.data)||a.message}}};export{o as j};
//# sourceMappingURL=jobService-BkGZEzDV.js.map
