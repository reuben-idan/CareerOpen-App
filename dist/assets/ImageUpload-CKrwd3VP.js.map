{"version":3,"file":"ImageUpload-CKrwd3VP.js","sources":["../../src/components/common/ImageUpload.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport { CameraIcon, XMarkIcon, PhotoIcon } from \"@heroicons/react/24/outline\";\r\n\r\nconst ImageUpload = ({\r\n  currentImage,\r\n  onImageChange,\r\n  onImageRemove,\r\n  onImageSelect,\r\n  type = \"profile\", // \"profile\" or \"cover\"\r\n  className = \"\",\r\n  disabled = false,\r\n}) => {\r\n  const [preview, setPreview] = useState(currentImage);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    const validTypes = [\"image/jpeg\", \"image/jpg\", \"image/png\", \"image/webp\"];\r\n    if (!validTypes.includes(file.type)) {\r\n      alert(\"Please select a valid image file (JPEG, PNG, or WebP)\");\r\n      return;\r\n    }\r\n\r\n    // Validate file size (max 5MB)\r\n    const maxSize = 5 * 1024 * 1024; // 5MB\r\n    if (file.size > maxSize) {\r\n      alert(\"File size must be less than 5MB\");\r\n      return;\r\n    }\r\n\r\n    // Create preview\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setPreview(e.target.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n\r\n    // Call parent handler\r\n    if (onImageSelect) {\r\n      onImageSelect(file);\r\n    }\r\n    if (onImageChange) {\r\n      onImageChange(file);\r\n    }\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    setPreview(null);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n    if (onImageRemove) {\r\n      onImageRemove();\r\n    }\r\n    if (onImageSelect) {\r\n      onImageSelect(null);\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (!disabled) {\r\n      fileInputRef.current?.click();\r\n    }\r\n  };\r\n\r\n  const isProfile = type === \"profile\";\r\n  const containerClasses = isProfile\r\n    ? \"relative w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-gray-800 shadow-lg\"\r\n    : \"relative w-full h-32 rounded-lg overflow-hidden border-2 border-dashed border-gray-300 dark:border-gray-600\";\r\n\r\n  return (\r\n    <div className={`${containerClasses} ${className}`}>\r\n      {/* Current Image or Placeholder */}\r\n      {preview ? (\r\n        <img\r\n          src={preview}\r\n          alt={isProfile ? \"Profile\" : \"Cover\"}\r\n          className=\"w-full h-full object-cover\"\r\n        />\r\n      ) : (\r\n        <div className=\"w-full h-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center\">\r\n          {isProfile ? (\r\n            <PhotoIcon className=\"h-12 w-12 text-gray-400\" />\r\n          ) : (\r\n            <div className=\"text-center\">\r\n              <PhotoIcon className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                {isProfile ? \"Add Photo\" : \"Add Cover Photo\"}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Overlay */}\r\n      {!disabled && (\r\n        <div\r\n          onClick={handleClick}\r\n          className=\"absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center cursor-pointer\"\r\n        >\r\n          <div className=\"text-center text-white\">\r\n            <CameraIcon className=\"h-6 w-6 mx-auto mb-1\" />\r\n            <span className=\"text-sm\">\r\n              {isProfile ? \"Change Photo\" : \"Change Cover\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Remove Button */}\r\n      {preview && !disabled && (\r\n        <button\r\n          onClick={handleRemoveImage}\r\n          className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 shadow-lg transition-colors duration-200\"\r\n          type=\"button\"\r\n        >\r\n          <XMarkIcon className=\"h-4 w-4\" />\r\n        </button>\r\n      )}\r\n\r\n      {/* Loading Overlay */}\r\n      {isUploading && (\r\n        <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n          <div className=\"text-center text-white\">\r\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white mx-auto mb-2\"></div>\r\n            <span className=\"text-sm\">Uploading...</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Hidden File Input */}\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\"image/jpeg,image/jpg,image/png,image/webp\"\r\n        onChange={handleFileSelect}\r\n        className=\"hidden\"\r\n        disabled={disabled}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n"],"names":["ImageUpload","currentImage","onImageChange","onImageRemove","onImageSelect","type","className","disabled","preview","setPreview","useState","isUploading","setIsUploading","fileInputRef","useRef","handleFileSelect","event","file","maxSize","reader","e","handleRemoveImage","handleClick","_a","isProfile","jsx","PhotoIcon","jsxs","CameraIcon","XMarkIcon"],"mappings":"8GAGA,MAAMA,EAAc,CAAC,CACnB,aAAAC,EACA,cAAAC,EACA,cAAAC,EACA,cAAAC,EACA,KAAAC,EAAO,UACP,UAAAC,EAAY,GACZ,SAAAC,EAAW,EACb,IAAM,CACJ,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAST,CAAY,EAC7C,CAACU,EAAaC,CAAc,EAAIF,EAAS,EAAK,EAC9CG,EAAeC,EAAO,IAAI,EAE1BC,EAAoBC,GAAU,CAClC,MAAMC,EAAOD,EAAM,OAAO,MAAM,CAAC,EACjC,GAAI,CAACC,EAAM,OAIX,GAAI,CADe,CAAC,aAAc,YAAa,YAAa,YAAY,EACxD,SAASA,EAAK,IAAI,EAAG,CACnC,MAAM,uDAAuD,EAC7D,MACF,CAGA,MAAMC,EAAU,EAAI,KAAO,KAC3B,GAAID,EAAK,KAAOC,EAAS,CACvB,MAAM,iCAAiC,EACvC,MACF,CAGA,MAAMC,EAAS,IAAI,WACnBA,EAAO,OAAUC,GAAM,CACrBX,EAAWW,EAAE,OAAO,MAAM,CAC5B,EACAD,EAAO,cAAcF,CAAI,EAGrBb,GACFA,EAAca,CAAI,EAEhBf,GACFA,EAAce,CAAI,CAEtB,EAEMI,EAAoB,IAAM,CAC9BZ,EAAW,IAAI,EACXI,EAAa,UACfA,EAAa,QAAQ,MAAQ,IAE3BV,GACFA,EAAA,EAEEC,GACFA,EAAc,IAAI,CAEtB,EAEMkB,EAAc,IAAM,OACnBf,IACHgB,EAAAV,EAAa,UAAb,MAAAU,EAAsB,OAE1B,EAEMC,EAAYnB,IAAS,UAK3B,SACG,MAAA,CAAI,UAAW,GALOmB,EACrB,uGACA,6GAGiC,IAAIlB,CAAS,GAE7C,SAAA,CAAAE,EACCiB,EAAC,MAAA,CACC,IAAKjB,EACL,IAAKgB,EAAY,UAAY,QAC7B,UAAU,4BAAA,CAAA,EAGZC,EAAC,MAAA,CAAI,UAAU,8EACZ,SAAAD,EACCC,EAACC,EAAA,CAAU,UAAU,yBAAA,CAA0B,EAE/CC,EAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAF,EAACC,EAAA,CAAU,UAAU,oCAAA,CAAqC,IACzD,IAAA,CAAE,UAAU,2CACV,SAAAF,EAAY,YAAc,iBAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CAEJ,EAID,CAACjB,GACAkB,EAAC,MAAA,CACC,QAASH,EACT,UAAU,sJAEV,SAAAK,EAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAF,EAACG,EAAA,CAAW,UAAU,sBAAA,CAAuB,IAC5C,OAAA,CAAK,UAAU,UACb,SAAAJ,EAAY,eAAiB,cAAA,CAChC,CAAA,CAAA,CACF,CAAA,CAAA,EAKHhB,GAAW,CAACD,GACXkB,EAAC,SAAA,CACC,QAASJ,EACT,UAAU,0HACV,KAAK,SAEL,SAAAI,EAACI,EAAA,CAAU,UAAU,SAAA,CAAU,CAAA,CAAA,EAKlClB,KACE,MAAA,CAAI,UAAU,2EACb,SAAAgB,EAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAF,EAAC,MAAA,CAAI,UAAU,wEAAA,CAAyE,EACxFA,EAAC,OAAA,CAAK,UAAU,UAAU,SAAA,cAAA,CAAY,CAAA,CAAA,CACxC,CAAA,CACF,EAIFA,EAAC,QAAA,CACC,IAAKZ,EACL,KAAK,OACL,OAAO,4CACP,SAAUE,EACV,UAAU,SACV,SAAAR,CAAA,CAAA,CACF,EACF,CAEJ"}