import{n as p}from"./vendor-D-WVJ8WC.js";const i="http://127.0.0.1:8000/api",o=p.create({baseURL:i,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(s=>{const e=localStorage.getItem("accessToken");return e&&(s.headers.Authorization=`Bearer ${e}`),s},s=>Promise.reject(s));o.interceptors.response.use(s=>s,async s=>{var r;const e=s.config;if(((r=s.response)==null?void 0:r.status)===401&&!e._retry){e._retry=!0;try{const t=localStorage.getItem("refreshToken");if(!t)return window.location.href="/login",Promise.reject(s);const h=await p.post(`${i}/token/refresh/`,{refresh:t}),{access:n,refresh:c}=h.data;return localStorage.setItem("accessToken",n),c&&localStorage.setItem("refreshToken",c),e.headers.Authorization=`Bearer ${n}`,o(e)}catch(t){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(t)}}return Promise.reject(s)});const g={api:o},{api:a}=g,y={getJobs:async(s={})=>{var e;try{return(await a.get("/jobs/",{params:s})).data}catch(r){throw((e=r.response)==null?void 0:e.data)||r.message}},getJobById:async s=>{var e;try{return(await a.get(`/jobs/${s}/`)).data}catch(r){throw((e=r.response)==null?void 0:e.data)||r.message}},createJob:async s=>{var e;try{return(await a.post("/jobs/",s)).data}catch(r){throw((e=r.response)==null?void 0:e.data)||r.message}},updateJob:async(s,e)=>{var r;try{return(await a.put(`/jobs/${s}/`,e)).data}catch(t){throw((r=t.response)==null?void 0:r.data)||t.message}},deleteJob:async s=>{var e;try{return await a.delete(`/jobs/${s}/`),!0}catch(r){throw((e=r.response)==null?void 0:e.data)||r.message}},searchJobs:async(s,e={})=>{var r;try{return(await a.get("/jobs/search/",{params:{search:s,...e}})).data}catch(t){throw((r=t.response)==null?void 0:r.data)||t.message}},applyForJob:async(s,e)=>{var r;try{return(await a.post(`/jobs/${s}/apply/`,e)).data}catch(t){throw((r=t.response)==null?void 0:r.data)||t.message}},getUserApplications:async()=>{var s;try{return(await a.get("/jobs/applications/")).data}catch(e){throw((s=e.response)==null?void 0:s.data)||e.message}},getApplicationDetails:async s=>{var e;try{return(await a.get(`/jobs/applications/${s}/`)).data}catch(r){throw((e=r.response)==null?void 0:e.data)||r.message}},toggleSaveJob:async s=>{var e;try{return(await a.post(`/jobs/${s}/save/`)).data}catch(r){throw((e=r.response)==null?void 0:e.data)||r.message}},getSavedJobs:async()=>{var s;try{return(await a.get("/jobs/saved/")).data}catch(e){throw((s=e.response)==null?void 0:s.data)||e.message}}};export{y as j};
//# sourceMappingURL=jobService-q2c8iVTz.js.map
