import{c as e,j as a,L as t,n as s}from"./index-Ds9jtgFm.js";import{r as i}from"./react-vendor-DmTOEE88.js";import{N as r,d as o}from"./NotificationFilter-Bk4FVecg.js";import{F as n}from"./XCircleIcon-BKgk3ie3.js";import{S as c}from"./Sidebar-BxUStrRa.js";import"./router-D2fOdiwT.js";import"./firebase-core-BD-oOiUn.js";import"./firebase-db-DLp_UO3Q.js";import"./ui-components-UtJZRBRj.js";import"./utils-B-PbHBFk.js";const l=()=>{const[c,l]=i.useState([]),[d,m]=i.useState(!0),[x,g]=i.useState(null),[f,h]=i.useState("all");i.useEffect(()=>{p()},[]);const p=async()=>{try{m(!0);const a=await fetch("/api/notifications"),t=await a.json();l(t),e.track("view_notifications")}catch(a){g("Failed to load notifications"),e.track("notification_error",{error:a.message})}finally{m(!1)}},j=async a=>{try{await fetch(`/api/notifications/${a}/read`,{method:"PUT"}),l(e=>e.map(e=>e.id===a?{...e,read:!0}:e)),e.track("mark_notification_read",{notificationId:a})}catch(t){console.error("Failed to mark notification as read:",t)}},u=c.filter(e=>"all"===f||e.type===f);if(d)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(t,{size:"lg"})});if(x)return a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full text-center",children:[a.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:a.jsx(n,{className:"h-12 w-12 mx-auto"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Error Loading Notifications"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:x}),a.jsx("button",{onClick:p,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Try Again"})]})});const y=c.filter(e=>!e.read).length;return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-3",children:a.jsx(r,{activeFilter:f,onFilterChange:a=>{h(a),e.track("notifications_filter",{filter:a})}})}),a.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-9",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-card overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),y>0&&a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[y," unread"]})]}),u.length>0?a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map(e=>a.jsx(o,{notification:e,onMarkAsRead:j},e.id))}):a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(s,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No notifications"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"all"===f?"You're all caught up!":`No ${f} notifications`})]})]})})]})})})},d=[{id:1,message:"You have a new connection request from Jane Doe",timestamp:"2 hours ago",category:"connection_requests"},{id:2,message:"John has applied to your job listing",timestamp:"1 day ago",category:"job_updates"},{id:3,message:"You received a new message from Sarah",timestamp:"3 days ago",category:"messages"},{id:4,message:"Your job application was viewed by an employer",timestamp:"5 days ago",category:"job_updates"}],m=()=>{const[e,t]=i.useState("all"),[s,o]=i.useState(d);return i.useEffect(()=>{o("all"===e?d:d.filter(a=>a.category===e))},[e]),a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[a.jsx(c,{}),a.jsx("div",{className:"flex-1 ml-0 md:ml-64",children:a.jsxs("div",{className:"container mx-auto py-8 px-4",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Notifications"}),a.jsx(r,{selectedFilter:e,onFilterChange:t}),a.jsx(l,{notifications:s})]})})]})};export{m as default};
//# sourceMappingURL=NotificationPage-BuEIvbFF.js.map
