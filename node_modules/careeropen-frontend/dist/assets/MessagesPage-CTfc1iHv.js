import{j as e,m as u}from"./ui-CVbvJRiz.js";import{r as l}from"./vendor-d-C7zhNw.js";import{B as g}from"./Button-DqISQD3F.js";import{c as I,A as j,u as L,I as F,d as A}from"./index-CeBhFBjJ.js";import{F as E}from"./EllipsisVerticalIcon-DqvEmO_J.js";import{F as k}from"./TrashIcon-BJb_oDZ_.js";import{F as $}from"./PaperAirplaneIcon-CIVrPnwX.js";import{F as z}from"./PlusIcon-CSoZhPtL.js";import{F as O}from"./MagnifyingGlassIcon-CUchmThK.js";import"./router-BB0LKx63.js";import"./utils-BTGVH9Kg.js";function B({title:s,titleId:o,...n},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":o},n),s?l.createElement("title",{id:o},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"}))}const W=l.forwardRef(B);function Z({title:s,titleId:o,...n},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":o},n),s?l.createElement("title",{id:o},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const N=l.forwardRef(Z),v=I((s,o)=>({conversations:[{id:"1",participant:{id:"1",name:"Sarah Chen",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=150&q=80",title:"Senior Software Engineer at TechCorp"},lastMessage:"Thanks for the React tips! Really helpful.",timestamp:"2m ago",unreadCount:2,isOnline:!0,isTyping:!1,messages:[{id:"m1",content:"Hi! I saw your post about React optimization. Could you share more details?",senderId:"1",timestamp:"10:30 AM",isRead:!0,type:"text"},{id:"m2",content:"Sure! The key is to use React.memo for components that don't change often, and useMemo for expensive calculations.",senderId:"current-user",timestamp:"10:32 AM",isRead:!0,type:"text"},{id:"m3",content:"Thanks for the React tips! Really helpful. Do you have any resources on advanced patterns?",senderId:"1",timestamp:"10:35 AM",isRead:!1,type:"text"}]},{id:"2",participant:{id:"2",name:"Michael Rodriguez",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150",title:"Product Manager at StartupXYZ"},lastMessage:"Let's schedule that call for next week",timestamp:"1h ago",unreadCount:0,isOnline:!1,isTyping:!1,messages:[{id:"m4",content:"Great meeting today! Let's schedule that follow-up call for next week.",senderId:"2",timestamp:"9:15 AM",isRead:!0,type:"text"},{id:"m5",content:"Sounds good! I'm free Tuesday or Wednesday afternoon.",senderId:"current-user",timestamp:"9:20 AM",isRead:!0,type:"text"}]}],selectedConversationId:null,isLoading:!1,sendMessage:(n,i,r="text",t)=>{const d={id:Date.now().toString(),content:i,senderId:"current-user",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isRead:!0,type:r,attachment:t};s(x=>({conversations:x.conversations.map(m=>m.id===n?{...m,messages:[...m.messages,d],lastMessage:r==="text"?i:`Sent ${r}`,timestamp:"Just now"}:m)})),setTimeout(()=>{const x=["That's interesting!","Thanks for sharing that.","I agree with your point.","Let me think about that.","Great idea!","Could you elaborate on that?"],m={id:(Date.now()+1).toString(),content:x[Math.floor(Math.random()*x.length)],senderId:n,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isRead:!1,type:"text"};s(w=>({conversations:w.conversations.map(h=>h.id===n?{...h,messages:[...h.messages,m],lastMessage:m.content,timestamp:"Just now",unreadCount:h.unreadCount+1,isTyping:!1}:h)}))},2e3)},markAsRead:(n,i)=>{s(r=>({conversations:r.conversations.map(t=>t.id===n?{...t,unreadCount:0,messages:t.messages.map(d=>i?d.id===i?{...d,isRead:!0}:d:{...d,isRead:!0})}:t)}))},setTyping:(n,i)=>{s(r=>({conversations:r.conversations.map(t=>t.id===n?{...t,isTyping:i}:t)}))},selectConversation:n=>{s({selectedConversationId:n}),o().markAsRead(n)},createConversation:n=>{const i={id:Date.now().toString(),participant:n,lastMessage:"",timestamp:"Just now",unreadCount:0,isOnline:Math.random()>.5,isTyping:!1,messages:[]};return s(r=>({conversations:[i,...r.conversations]})),i.id},deleteMessage:(n,i)=>{s(r=>({conversations:r.conversations.map(t=>t.id===n?{...t,messages:t.messages.filter(d=>d.id!==i)}:t)}))},setLoading:n=>s({isLoading:n})}));function P({conversations:s,selectedId:o,onSelect:n}){const{selectConversation:i}=v(),r=t=>{i(t),n(t)};return e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm",children:"Start a new conversation!"})]}):s.map((t,d)=>e.jsx(u.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},onClick:()=>r(t.id),className:`w-full p-4 rounded-xl text-left transition-all ${o===t.id?"bg-ocean-100 border-ocean-200":"bg-white/20 hover:bg-white/30 border-white/30"} border backdrop-blur-md`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"relative",children:e.jsx(j,{src:t.participant.avatar,name:t.participant.name,size:"md",status:t.isOnline?"online":"offline"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:t.participant.name}),e.jsx("span",{className:"text-xs text-gray-500",children:t.timestamp})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1 truncate",children:t.participant.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-500 truncate flex-1",children:t.isTyping?e.jsx("span",{className:"italic text-ocean-600",children:"typing..."}):t.lastMessage||"No messages yet"}),t.unreadCount>0&&e.jsx("span",{className:"ml-2 bg-ocean-600 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:t.unreadCount})]})]})]})},t.id))})}function G({conversation:s}){const[o,n]=l.useState(""),[i,r]=l.useState(null),[t,d]=l.useState(null),x=l.useRef(null),m=l.useRef(null),{user:w}=L(),{sendMessage:h,deleteMessage:y,setTyping:c}=v(),b=()=>{var a;(a=x.current)==null||a.scrollIntoView({behavior:"smooth"})};l.useEffect(()=>{b()},[s.messages]);const C=()=>{if(!(!o.trim()&&!i)){if(i){const a=URL.createObjectURL(i);h(s.id,i.name,i.type.startsWith("image/")?"image":"file",{name:i.name,url:a,type:i.type}),r(null)}else h(s.id,o);n("")}},S=a=>{var p;const f=(p=a.target.files)==null?void 0:p[0];f&&r(f)},R=a=>{y(s.id,a),d(null)},T=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),C())},D=a=>{n(a.target.value),c(s.id,!0),setTimeout(()=>c(s.id,!1),1e3)};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-white/20 bg-white/10 backdrop-blur-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{src:s.participant.avatar,name:s.participant.name,size:"md",status:"online"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.participant.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.participant.title})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.messages.map((a,f)=>{const p=a.senderId==="current-user",M=f===0||s.messages[f-1].senderId!==a.senderId;return e.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:f*.05},className:`flex ${p?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex space-x-2 max-w-[70%] ${p?"flex-row-reverse space-x-reverse":"flex-row"}`,children:[!p&&M&&e.jsx(j,{src:s.participant.avatar,name:s.participant.name,size:"sm"}),!p&&!M&&e.jsx("div",{className:"w-8"}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:`rounded-2xl px-4 py-2 ${p?"bg-ocean-600 text-white":"bg-white/20 backdrop-blur-md text-gray-900"}`,children:[a.type==="image"&&a.attachment?e.jsxs("div",{children:[e.jsx("img",{src:a.attachment.url,alt:a.attachment.name,className:"max-w-xs rounded-lg mb-2"}),e.jsx("p",{className:"text-sm",children:a.content})]}):a.type==="file"&&a.attachment?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a.attachment.name})]}):e.jsx("p",{className:"text-sm leading-relaxed",children:a.content}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:`text-xs ${p?"text-ocean-100":"text-gray-500"}`,children:a.timestamp}),!a.isRead&&p&&e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})]})]}),p&&e.jsx("button",{onClick:()=>d(t===a.id?null:a.id),className:"absolute -right-8 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded-full hover:bg-gray-200",children:e.jsx(E,{className:"w-4 h-4 text-gray-500"})}),t===a.id&&e.jsx("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border p-2 z-10",children:e.jsxs("button",{onClick:()=>R(a.id),className:"flex items-center space-x-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-md w-full text-left",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Delete"})]})})]})]})},a.id)}),s.isTyping&&e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center space-x-2",children:[e.jsx(j,{src:s.participant.avatar,name:s.participant.name,size:"sm"}),e.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-2xl px-4 py-2",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"p-4 border-t border-white/20 bg-white/10 backdrop-blur-md",children:[i&&e.jsxs("div",{className:"mb-3 p-3 bg-white/20 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:i.name})]}),e.jsx("button",{onClick:()=>r(null),className:"text-red-500 hover:text-red-700",children:e.jsx(k,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-end space-x-3",children:[e.jsx("input",{ref:m,type:"file",onChange:S,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),e.jsx(g,{variant:"glass",size:"sm",onClick:()=>{var a;return(a=m.current)==null?void 0:a.click()},children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:o,onChange:D,onKeyPress:T,placeholder:"Type a message...",className:"w-full px-4 py-3 rounded-xl bg-white/20 backdrop-blur-md border border-white/30 focus:border-ocean-400 focus:outline-none resize-none",rows:1})}),e.jsx(g,{variant:"glass",size:"sm",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsx(g,{onClick:C,disabled:!o.trim()&&!i,className:"bg-ocean-600 hover:bg-ocean-700",children:e.jsx($,{className:"w-5 h-5"})})]})]})]})}const H=[{id:"4",name:"Alex Thompson",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150",title:"Full Stack Developer at TechStart"},{id:"5",name:"Lisa Wang",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150",title:"Data Scientist at AI Corp"},{id:"6",name:"David Kim",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150",title:"DevOps Engineer at CloudTech"}];function te(){const[s,o]=l.useState(""),[n,i]=l.useState(!1),{conversations:r,selectedConversationId:t,createConversation:d}=v(),[x,m]=l.useState(null);l.useEffect(()=>{r.length>0&&!x&&m(r[0].id)},[r,x]);const w=r.filter(c=>c.participant.name.toLowerCase().includes(s.toLowerCase())),h=r.find(c=>c.id===x),y=c=>{const b=d(c);m(b),i(!1)};return e.jsxs("div",{className:"h-screen flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-white/20",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsx("h1",{className:"heading-2 text-gray-900",children:"Messages"}),e.jsxs(g,{className:"bg-ocean-600 hover:bg-ocean-700",onClick:()=>i(!0),children:[e.jsx(z,{className:"w-5 h-5 mr-2"}),"New Message"]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-80 border-r border-white/20 bg-white/5 backdrop-blur-md",children:e.jsxs("div",{className:"p-4",children:[e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"relative mb-4",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(F,{placeholder:"Search conversations...",value:s,onChange:c=>o(c.target.value),className:"pl-10 bg-white/20 border-white/30"})]}),e.jsx("div",{className:"space-y-2 max-h-[calc(100vh-200px)] overflow-y-auto",children:e.jsx(P,{conversations:w,selectedId:x,onSelect:m})})]})}),e.jsx("div",{className:"flex-1 bg-gradient-to-br from-ocean-50/30 via-pearl-50/30 to-aqua-50/30",children:h?e.jsx(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"h-full",children:e.jsx(G,{conversation:h})},x):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select a conversation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Choose a conversation from the sidebar to start messaging"}),e.jsx(g,{onClick:()=>i(!0),className:"bg-ocean-600 hover:bg-ocean-700",children:"Start New Conversation"})]})})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"New Message"}),e.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(A,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select a person to start messaging:"}),H.map(c=>e.jsxs("button",{onClick:()=>y(c),className:"w-full p-3 rounded-lg hover:bg-gray-50 flex items-center space-x-3 text-left",children:[e.jsx(j,{src:c.avatar,name:c.name,size:"sm"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:c.name}),e.jsx("div",{className:"text-sm text-gray-600",children:c.title})]})]},c.id))]})]})})]})}export{te as default};
//# sourceMappingURL=MessagesPage-CTfc1iHv.js.map
