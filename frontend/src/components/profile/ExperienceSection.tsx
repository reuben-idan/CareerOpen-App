import { useState } from 'react'\nimport { motion } from 'framer-motion'\nimport { PlusIcon, PencilIcon, TrashIcon, CalendarIcon, MapPinIcon } from '@heroicons/react/24/outline'\nimport { Card, Button, Input, Textarea } from '@/components/ui'\n\ninterface Experience {\n  id?: string\n  title: string\n  company: string\n  location: string\n  startDate: string\n  endDate?: string\n  isCurrent: boolean\n  description: string\n}\n\ninterface ExperienceSectionProps {\n  experiences: Experience[]\n  isEditable?: boolean\n  onExperiencesChange?: (experiences: Experience[]) => void\n}\n\nexport default function ExperienceSection({ experiences, isEditable = false, onExperiencesChange }: ExperienceSectionProps) {\n  const [isAdding, setIsAdding] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [formData, setFormData] = useState<Experience>({\n    title: '',\n    company: '',\n    location: '',\n    startDate: '',\n    endDate: '',\n    isCurrent: false,\n    description: ''\n  })\n\n  const handleSave = () => {\n    if (!formData.title || !formData.company) return\n    \n    let updatedExperiences\n    if (editingId) {\n      updatedExperiences = experiences.map(exp => \n        exp.id === editingId ? { ...formData, id: editingId } : exp\n      )\n    } else {\n      updatedExperiences = [...experiences, { ...formData, id: Date.now().toString() }]\n    }\n    \n    onExperiencesChange?.(updatedExperiences)\n    resetForm()\n  }\n\n  const handleEdit = (experience: Experience) => {\n    setFormData(experience)\n    setEditingId(experience.id || null)\n    setIsAdding(true)\n  }\n\n  const handleDelete = (id: string) => {\n    const updatedExperiences = experiences.filter(exp => exp.id !== id)\n    onExperiencesChange?.(updatedExperiences)\n  }\n\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      company: '',\n      location: '',\n      startDate: '',\n      endDate: '',\n      isCurrent: false,\n      description: ''\n    })\n    setIsAdding(false)\n    setEditingId(null)\n  }\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return ''\n    const date = new Date(dateString)\n    return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short' })\n  }\n\n  return (\n    <Card>\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"heading-3 text-gray-900\">Experience</h2>\n        {isEditable && (\n          <Button\n            variant=\"glass\"\n            size=\"sm\"\n            onClick={() => setIsAdding(true)}\n            className=\"flex items-center space-x-2\"\n          >\n            <PlusIcon className=\"w-4 h-4\" />\n            <span>Add Experience</span>\n          </Button>\n        )}\n      </div>\n\n      {/* Add/Edit Form */}\n      {isAdding && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          className=\"mb-6 p-6 rounded-xl bg-gray-50 space-y-4\"\n        >\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <Input\n              placeholder=\"Job Title\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            />\n            <Input\n              placeholder=\"Company\"\n              value={formData.company}\n              onChange={(e) => setFormData({ ...formData, company: e.target.value })}\n            />\n          </div>\n          \n          <Input\n            placeholder=\"Location\"\n            value={formData.location}\n            onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n          />\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date</label>\n              <Input\n                type=\"date\"\n                value={formData.startDate}\n                onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date</label>\n              <Input\n                type=\"date\"\n                value={formData.endDate}\n                onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\n                disabled={formData.isCurrent}\n              />\n            </div>\n          </div>\n          \n          <label className=\"flex items-center space-x-2\">\n            <input\n              type=\"checkbox\"\n              checked={formData.isCurrent}\n              onChange={(e) => setFormData({ \n                ...formData, \n                isCurrent: e.target.checked,\n                endDate: e.target.checked ? '' : formData.endDate\n              })}\n              className=\"rounded border-gray-300 text-ocean-600 focus:ring-ocean-500\"\n            />\n            <span className=\"text-sm text-gray-700\">I currently work here</span>\n          </label>\n          \n          <Textarea\n            placeholder=\"Describe your role, responsibilities, and achievements...\"\n            value={formData.description}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n            rows={4}\n          />\n          \n          <div className=\"flex space-x-3\">\n            <Button onClick={handleSave}>\n              {editingId ? 'Update' : 'Add'} Experience\n            </Button>\n            <Button variant=\"glass\" onClick={resetForm}>\n              Cancel\n            </Button>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Experience List */}\n      <div className=\"space-y-6\">\n        {experiences.map((experience, index) => (\n          <motion.div\n            key={experience.id || index}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.1 }}\n            className=\"relative group\"\n          >\n            <div className=\"flex\">\n              {/* Timeline */}\n              <div className=\"flex flex-col items-center mr-4\">\n                <div className=\"w-3 h-3 bg-ocean-600 rounded-full\" />\n                {index < experiences.length - 1 && (\n                  <div className=\"w-0.5 h-full bg-gray-300 mt-2\" />\n                )}\n              </div>\n              \n              {/* Content */}\n              <div className=\"flex-1 pb-8\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      {experience.title}\n                    </h3>\n                    <p className=\"text-ocean-600 font-medium mb-2\">\n                      {experience.company}\n                    </p>\n                    \n                    <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-3\">\n                      <div className=\"flex items-center space-x-1\">\n                        <CalendarIcon className=\"w-4 h-4\" />\n                        <span>\n                          {formatDate(experience.startDate)} - {' '}\n                          {experience.isCurrent ? 'Present' : formatDate(experience.endDate || '')}\n                        </span>\n                      </div>\n                      {experience.location && (\n                        <div className=\"flex items-center space-x-1\">\n                          <MapPinIcon className=\"w-4 h-4\" />\n                          <span>{experience.location}</span>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {experience.description && (\n                      <p className=\"text-gray-700 leading-relaxed\">\n                        {experience.description}\n                      </p>\n                    )}\n                  </div>\n                  \n                  {isEditable && (\n                    <div className=\"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <button\n                        onClick={() => handleEdit(experience)}\n                        className=\"p-2 rounded-full hover:bg-gray-100 text-gray-600\"\n                      >\n                        <PencilIcon className=\"w-4 h-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleDelete(experience.id!)}\n                        className=\"p-2 rounded-full hover:bg-red-100 text-red-600\"\n                      >\n                        <TrashIcon className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n\n      {experiences.length === 0 && (\n        <div className=\"text-center py-8\">\n          <p className=\"text-gray-600 mb-4\">\n            {isEditable ? 'Add your work experience to build your professional story' : 'No experience listed yet'}\n          </p>\n          {isEditable && (\n            <Button\n              variant=\"glass\"\n              onClick={() => setIsAdding(true)}\n              className=\"flex items-center space-x-2 mx-auto\"\n            >\n              <PlusIcon className=\"w-4 h-4\" />\n              <span>Add Your First Experience</span>\n            </Button>\n          )}\n        </div>\n      )}\n    </Card>\n  )\n}"