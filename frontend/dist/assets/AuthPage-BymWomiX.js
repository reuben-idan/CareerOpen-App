var j=Object.defineProperty;var S=(s,e,r)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var p=(s,e,r)=>S(s,typeof e!="symbol"?e+"":e,r);import{j as t,m as N}from"./ui-CVbvJRiz.js";import{r as l}from"./vendor-d-C7zhNw.js";import{G as v}from"./GlassPanel-CD38_L_y.js";import{B as w}from"./Button-BdmQPEF0.js";import{u as q,L as k}from"./index-dsmXL8HG.js";import{b as A}from"./router-BB0LKx63.js";import"./utils-BTGVH9Kg.js";const g="http://localhost:8000/api";class P{constructor(){p(this,"baseUrl",g)}getAuthHeaders(){const e=localStorage.getItem("access_token");return e?{Authorization:`Bearer ${e}`}:{}}async request(e,r={}){const u=`${g}${e}`,i={headers:{"Content-Type":"application/json",...this.getAuthHeaders(),...r.headers},...r},o=await fetch(u,i);if(!o.ok){const c=await o.text();throw console.error("API Error:",o.status,c),new Error(`API Error: ${o.status}`)}return o.json()}async register(e){return this.request("/auth/register/",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login/",{method:"POST",body:JSON.stringify(e)})}async getProfile(){return this.request("/auth/profile/")}async getJobs(e){const r=e?`?${new URLSearchParams(e)}`:"";return this.request(`/jobs/${r}`)}async getJob(e){return this.request(`/jobs/${e}/`)}async createJob(e){return this.request("/jobs/",{method:"POST",body:JSON.stringify(e)})}async getApplications(){return this.request("/applications/")}async createApplication(e){return this.request("/applications/",{method:"POST",body:JSON.stringify(e)})}async getCompanies(){return this.request("/companies/")}async getCompany(e){return this.request(`/companies/${e}/`)}async getUserProfile(){return this.request("/profiles/")}async updateProfile(e){return this.request("/profiles/",{method:"PATCH",body:JSON.stringify(e)})}}const f=new P;function T(){const[s,e]=l.useState(!0),[r,u]=l.useState(""),[i,o]=l.useState(""),[c,y]=l.useState(""),[m,d]=l.useState(!1),x=A(),h=q(a=>a.login),b=async a=>{a.preventDefault(),d(!0);try{if(s){const n=await f.login({email:r,password:i});localStorage.setItem("access_token",n.tokens.access),localStorage.setItem("refresh_token",n.tokens.refresh),h(n.user)}else{const n=await f.register({email:r,password:i,first_name:c.split(" ")[0]||"",last_name:c.split(" ").slice(1).join(" ")||""});localStorage.setItem("access_token",n.tokens.access),localStorage.setItem("refresh_token",n.tokens.refresh),h(n.user)}x("/app/dashboard")}catch(n){console.error("Auth error:",n)}finally{d(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center px-6",children:t.jsx(N.div,{className:"w-full max-w-md",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:t.jsxs(v,{children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx(k,{size:"lg"})}),t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:s?"Welcome Back":"Join CareerOpen"}),t.jsx("p",{className:"text-gray-600",children:s?"Sign in to your account":"Create your professional profile"})]}),t.jsxs("form",{onSubmit:b,className:"space-y-6",children:[!s&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),t.jsx("input",{type:"text",value:c,onChange:a=>y(a.target.value),className:"w-full px-4 py-3 rounded-xl glass-button border-0 focus:ring-2 focus:ring-ocean-400",placeholder:"Enter your full name",required:!s})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:r,onChange:a=>u(a.target.value),className:"w-full px-4 py-3 rounded-xl glass-button border-0 focus:ring-2 focus:ring-ocean-400",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),t.jsx("input",{type:"password",value:i,onChange:a=>o(a.target.value),className:"w-full px-4 py-3 rounded-xl glass-button border-0 focus:ring-2 focus:ring-ocean-400",placeholder:"Enter your password",required:!0})]}),t.jsx(w,{type:"submit",className:"w-full",size:"lg",disabled:m,children:m?"Loading...":s?"Sign In":"Create Account"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>e(!s),className:"text-ocean-600 hover:text-ocean-700 font-medium",children:s?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})})}export{T as default};
//# sourceMappingURL=AuthPage-BymWomiX.js.map
